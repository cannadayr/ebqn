-module(ebqn_test).

-include("schema.hrl").

-import(ebqn,[run/1,str/1]).
-export([bc/0,layer0/1,layer1/1,layer2/1,layer3/1,test/0]).

test() ->
    ok.

bc() ->
    % bytecode tests
    5 = run([[0,0,25],[5],[[0,1,0,0]]]), % 5
    3 = run([[0,0,14,0,1,25],[4,3],[[0,1,0,0]]]), % 4â‹„3
    5 = run([[0,0,22,0,0,11,25],[5],[[0,1,0,1]]]), % aâ†5
    4 = run([[0,0,22,0,0,11,14,0,1,22,0,0,12,25],[5,4],[[0,1,0,1]]]), % aâ†5â‹„aâ†©4
    2 = run([[0,0,22,0,0,11,14,0,1,22,0,1,11,14,21,0,0,25],[2,3],[[0,1,0,2]]]), % aâ†2â‹„bâ†3â‹„a
    1 = run([[0,0,22,0,0,11,14,0,1,21,0,0,16,25],[1,4],[[0,1,0,1]]]), % aâ†1â‹„A 4
    2 = run([[0,0,22,0,0,11,14,0,2,21,0,0,0,1,17,25],[2,3,4],[[0,1,0,1]]]), % aâ†2â‹„3 A 4
    6 = run([[0,0,15,1,16,25,21,0,1,25],[6],[[0,1,0,0],[0,0,6,3]]]), % {ğ•©}6
    3 = run([[15,1,22,0,0,11,14,0,1,21,0,0,0,0,17,25,21,0,2,25],[3,4],[[0,1,0,1],[0,0,16,3]]]), % Aâ†{ğ•¨}â‹„3 A 4
    7 = run([[0,0,0,1,3,2,22,0,0,22,0,1,4,2,11,14,21,0,0,25],[7,2],[[0,1,0,2]]]), % aâ€¿bâ†7â€¿2â‹„a
    4 = run([[0,1,15,1,0,0,7,16,25,21,0,1,25],[4,6],[[0,1,0,0],[1,1,9,2]]]), % "4{ğ”½}6"
    6 = run([[0,1,15,1,0,0,7,16,25,21,0,4,14,21,0,1,25],[4,6],[[0,1,0,0],[1,0,9,5]]]), % "4{ğ”½â‹„ğ•©}6"
    1 = run([[0,1,15,1,15,2,0,0,8,16,25,21,0,1,25,21,0,2,25],[3,1],[[0,1,0,0],[0,0,11,3],[2,1,15,3]]]), % "3{ğ”¾}{ğ•©} 1 "
    2 = run([[0,1,15,1,15,2,0,0,7,9,16,25,21,0,1,25,21,0,1,25],[2,3],[[0,1,0,0],[0,0,12,3],[1,1,16,2]]]), % "(2{ğ”½}{ğ•©})3 "
    3 = run([[0,1,15,1,15,2,9,0,0,17,25,21,0,2,21,0,1,3,2,25,21,0,1,22,0,3,22,0,4,4,2,11,14,21,0,3,25],[3,4],[[0,1,0,0],[0,0,11,3],[0,0,20,5]]]), % "3({aâ€¿bâ†ğ•©â‹„a}{ğ•¨â€¿ğ•©})4 "
    4 = run([[0,1,15,1,15,2,15,3,19,0,0,17,25,21,0,2,25,21,0,1,25,21,0,2,21,0,1,3,2,25],[4,5],[[0,1,0,0],[0,0,13,3],[0,0,17,3],[0,0,21,3]]]), % "4({ğ•¨â€¿ğ•©}{ğ•©}{ğ•¨})5"
    2 = run([[0,1,15,1,15,2,0,0,19,16,22,0,0,22,0,1,4,2,11,14,21,0,0,25,21,0,1,25,21,0,2,21,0,1,3,2,25],[2,5],[[0,1,0,2],[0,0,24,3],[0,0,28,3]]]), % "aâ€¿bâ†(2{ğ•¨â€¿ğ•©}{ğ•©})5â‹„a "
    2 = run([[0,2,22,0,0,11,15,1,15,2,15,3,19,16,25,0,1,22,1,0,12,14,21,0,1,25,21,0,1,14,21,1,0,25,0,0,22,1,0,12,14,21,0,1,25],[2,3,4],[[0,1,0,1],[0,0,15,3],[0,0,26,3],[0,0,34,3]]]), % "({aâ†©2â‹„ğ•©}{ğ•©â‹„a}{aâ†©3â‹„ğ•©})aâ†4 "
    8 = run([[0,0,22,0,0,11,14,0,1,15,1,22,0,0,13,14,21,0,0,25,21,0,1,25],[3,8],[[0,1,0,1],[0,0,20,3]]]), % "aâ†3â‹„a{ğ•©}â†©8â‹„a  "
    4 = run([[0,0,0,1,3,2,22,0,0,22,0,1,4,2,11,14,0,2,15,1,22,0,0,22,0,1,4,2,13,14,21,0,0,25,21,0,1,21,0,2,3,2,25],[2,1,4],[[0,1,0,2],[0,0,34,3]]]), % "aâ€¿bâ†2â€¿1â‹„aâ€¿b{ğ•©â€¿ğ•¨}â†©4â‹„a "
    1 = run([[0,0,22,0,0,11,14,15,1,14,21,0,0,25,0,1,22,0,0,11,25],[1,2],[[0,1,0,1],[0,1,14,1]]]), % "aâ†1â‹„{aâ†2}â‹„a"
    2 = run([[0,0,22,0,0,11,14,15,1,14,21,0,0,25,0,1,22,1,0,12,25],[1,2],[[0,1,0,1],[0,1,14,0]]]), % "aâ†1â‹„{aâ†©2}â‹„a"
    6 = run([[15,1,22,0,0,22,0,1,4,2,11,14,0,1,21,0,0,16,14,0,2,21,0,1,16,25,0,0,22,0,0,11,14,15,2,15,3,3,2,25,21,0,1,22,1,0,12,25,21,0,1,14,21,1,0,25],[2,6,0],[[0,1,0,2],[0,1,26,1],[0,0,40,3],[0,0,48,3]]]), % "fâ€¿gâ†{aâ†2â‹„{aâ†©ğ•©}â€¿{ğ•©â‹„a}}â‹„F 6â‹„G 0"
    5 = run([[15,1,22,0,0,11,14,0,0,21,0,0,16,21,0,0,16,21,0,0,16,15,2,16,25,15,3,21,0,1,7,25,21,0,0,21,0,1,16,25,21,0,4,21,0,1,16,25],[5],[[0,1,0,1],[0,0,25,3],[0,0,32,3],[1,0,40,5]]]), % "Lâ†{ğ•©{ğ•ğ•—}}â‹„{ğ•ğ•¤}L L L 5"
    3 = run([[15,1,22,0,0,11,14,0,1,21,0,0,0,0,7,16,21,0,0,15,2,7,16,15,3,16,25,21,0,4,15,4,21,0,1,7,9,25,21,0,1,25,21,0,0,21,0,1,16,25,21,0,4,21,0,1,16,25],[3,5],[[0,1,0,1],[1,0,27,5],[0,0,38,3],[0,0,42,3],[1,0,50,5]]]), % "_lâ†{ğ•©{ğ•ğ•—} ğ”½}â‹„{ğ•ğ•¤} {ğ•©}_l 3 _l 5"
    1 = run([[0,1,15,1,15,2,15,3,8,0,0,17,25,21,0,1,25,21,0,1,21,0,2,15,4,21,0,1,7,19,25,21,0,2,25,21,0,2,21,0,4,21,0,1,17,25],[1,0],[[0,1,0,0],[0,0,13,3],[2,1,17,3],[0,0,31,3],[1,0,35,5]]]), % "1{ğ•¨}{ğ”½{ğ•©ğ”½ğ•¨}ğ”¾ğ”½}{ğ•©}0 "
    2 = run([[0,0,0,1,0,2,0,3,0,4,15,1,3,2,3,2,3,2,3,2,3,2,15,2,0,0,0,0,15,3,3,2,3,2,7,16,25,21,0,1,25,21,0,1,15,4,16,25,21,0,1,25,21,0,1,22,0,3,22,0,4,4,2,11,14,21,0,0,22,0,5,11,14,0,0,15,5,15,6,7,16,14,15,7,21,0,4,21,0,5,16,7,25,21,0,1,21,1,4,16,25,21,0,0,14,15,8,22,1,5,12,25,21,0,1,22,0,5,22,0,6,4,2,11,14,21,0,6,21,0,4,16,25,21,0,0,14,15,9,25,21,0,1,22,0,3,22,0,4,4,2,11,14,21,0,3,25],[0,1,2,3,4],[[0,1,0,0],[0,0,37,3],[1,1,41,2],[0,0,48,3],[0,0,52,6],[1,1,93,2],[0,0,101,3],[1,0,112,7],[0,0,133,3],[0,0,140,5]]]), % "0â€¿(0â€¿{ğ•©}){{aâ€¿bâ†ğ•©â‹„tâ†ğ•¤â‹„{ğ•¤â‹„Tâ†©{ğ•¤â‹„{aâ€¿bâ†ğ•©â‹„a}}}{Bğ•—}0â‹„(T b){aâ€¿bâ†ğ•©â‹„ğ”½b}}ğ•—} 0â€¿(1â€¿(2â€¿(3â€¿(4â€¿{ğ•©}))))"
    ok.

% ebqn:run(ebqn:call(ebqn:run(ebqn_bc:ebqn_array:get()),ebqn_core:fns(),undefined)).
% notes of changes made to cjs output:
%   ebqn_array:get(N,R) becomes array:get(N,R)
%   single quoted strings become double quoted strings
%   'Infinity' and '-Infinity' become 'inf' and 'ninf'
layer0(#v{r=R}) ->
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),0,-2,2],[[0,1,0,0]]]), % 0â‰¡Â¯2+2
    1 = run([[0,3,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),10000,5000],[[0,1,0,0]]]), % 1e4â‰¡5e3+5e3
    1 = run([[0,2,0,0,0,4,17,0,1,0,3,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),2,"c","a"],[[0,1,0,0]]]), % 'c'â‰¡'a'+2
    1 = run([[0,4,0,0,0,2,17,0,1,0,3,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),-2,"a","c"],[[0,1,0,0]]]), % 'a'â‰¡Â¯2+'c'
    ok = try run([[0,2,0,0,0,1,17,25],[ebqn_array:get(0,R),"a","c"],[[0,1,0,0]]]) % ! % 'a'+'c'
        catch _ -> ok
    end,
    ok = try run([[0,1,22,0,0,11,14,0,2,0,0,21,0,0,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),2],[[0,1,0,1]]]) % Fâ†-â‹„f+2
        catch _ -> ok
    end,
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ninf,1000000,inf],[[0,1,0,0]]]), % Â¯âˆâ‰¡1e6-âˆ
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),4,-4],[[0,1,0,0]]]), % 4â‰¡-Â¯4
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ninf,inf],[[0,1,0,0]]]), % Â¯âˆâ‰¡-âˆ
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),inf,ninf],[[0,1,0,0]]]), % âˆâ‰¡-Â¯âˆ
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),4,9,5],[[0,1,0,0]]]), % 4â‰¡9-5
    1 = run([[0,2,0,0,0,4,17,0,1,0,3,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),97,"\0","a"],[[0,1,0,0]]]), % @â‰¡'a'-97
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),3,"d","a"],[[0,1,0,0]]]), % 3â‰¡'d'-'a'
    ok = try run([[0,2,0,0,0,1,17,25],[ebqn_array:get(1,R),97,"a"],[[0,1,0,0]]]) % 97-'a'
        catch _ -> ok
    end,
    %ok = try run([[0,1,0,0,0,2,17,25],[ebqn_array:get(1,R),1,"\0"],[[0,1,0,0]]]) % @-1
    %    catch _ -> ok
    %end,
    ok = try run([[0,1,0,0,16,25],[ebqn_array:get(1,R),"a"],[[0,1,0,0]]]) % -'a'
        catch _ -> ok
    end,
    ok = try run([[0,1,22,0,0,11,14,21,0,0,0,0,16,25],[ebqn_array:get(1,R),ebqn_array:get(3,R)],[[0,1,0,1]]]) % Fâ†Ã·â‹„-f
        catch _ -> ok
    end,
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(2,R),ebqn_array:get(18,R),1.5,3,0.5],[[0,1,0,0]]]), % 1.5â‰¡3Ã—0.5
    ok = try run([[0,2,0,0,0,1,17,25],[ebqn_array:get(2,R),2,"a"],[[0,1,0,0]]]) % 2Ã—'a'
        catch _ -> ok
    end,
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(3,R),ebqn_array:get(18,R),4,0.25],[[0,1,0,0]]]), % 4â‰¡Ã·0.25
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(3,R),ebqn_array:get(18,R),inf,0],[[0,1,0,0]]]), % âˆâ‰¡Ã·0
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(3,R),ebqn_array:get(18,R),0,inf],[[0,1,0,0]]]), % 0â‰¡Ã·âˆ
    ok = try run([[0,1,0,0,16,25],[ebqn_array:get(3,R),"b"],[[0,1,0,0]]]) % Ã·'b'
        catch _ -> ok
    end,
    ok = try run([[0,1,0,0,16,25],[ebqn_array:get(3,R),"b"],[[0,1,0,0]]]) % Fâ†âˆš-â‹„Ã·f
        catch _ -> ok
    end,
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(4,R),ebqn_array:get(18,R),1,0],[[0,1,0,0]]]), % 1â‰¡â‹†0
    1 = run([[0,3,0,0,0,2,17,0,1,0,2,17,25],[ebqn_array:get(4,R),ebqn_array:get(18,R),-1,5],[[0,1,0,0]]]), % Â¯1â‰¡Â¯1â‹†5
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(4,R),ebqn_array:get(18,R),1,-1,-6],[[0,1,0,0]]]), % 1â‰¡Â¯1â‹†Â¯6
    ok = try run([[0,1,0,0,16,25],[ebqn_array:get(4,R),"Ï€"],[[0,1,0,0]]]) % â‹†'Ï€'
        catch _ -> ok
    end,
    ok = try run([[0,2,0,0,0,1,17,25],[ebqn_array:get(4,R),"e","Ï€"],[[0,1,0,0]]]) % 'e'â‹†'Ï€'
        catch _ -> ok
    end,
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(6,R),ebqn_array:get(18,R),3,3.9],[[0,1,0,0]]]), % 3â‰¡âŒŠ3.9
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(6,R),ebqn_array:get(18,R),-4,-3.9],[[0,1,0,0]]]), % Â¯4â‰¡âŒŠÂ¯3.9
    1 = run([[0,2,0,0,16,0,1,0,2,17,25],[ebqn_array:get(6,R),ebqn_array:get(18,R),inf],[[0,1,0,0]]]), % âˆâ‰¡âŒŠâˆ
    1 = run([[0,2,0,0,16,0,1,0,2,17,25],[ebqn_array:get(6,R),ebqn_array:get(18,R),ninf],[[0,1,0,0]]]), % Â¯âˆâ‰¡âŒŠÂ¯âˆ
    1 = run([[0,2,0,0,16,0,1,0,2,17,25],[ebqn_array:get(6,R),ebqn_array:get(18,R),-1.0E30],[[0,1,0,0]]]), % Â¯1e30â‰¡âŒŠÂ¯1e30
    ok = try run([[0,1,22,0,0,11,14,21,0,0,0,0,16,25],[ebqn_array:get(6,R),ebqn_array:get(7,R)],[[0,1,0,1]]]) % Fâ†âŒˆâ‹„âŒŠf
        catch _ -> ok
    end,
    1 = run([[0,2,0,0,0,2,17,0,1,0,2,17,25],[ebqn_array:get(15,R),ebqn_array:get(18,R),1],[[0,1,0,0]]]), % 1â‰¡1=1
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(15,R),ebqn_array:get(18,R),0,-1,inf],[[0,1,0,0]]]), % 0â‰¡Â¯1=âˆ
    1 = run([[0,3,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(15,R),ebqn_array:get(18,R),1,"a"],[[0,1,0,0]]]), % 1â‰¡'a'='a'
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(15,R),ebqn_array:get(18,R),0,"a","A"],[[0,1,0,0]]]), % 0â‰¡'a'='A'
    1 = run([[15,1,0,2,0,3,17,25,0,0,22,0,0,11,14,21,0,0,0,1,21,0,0,17,25],[ebqn_array:get(0,R),ebqn_array:get(15,R),ebqn_array:get(18,R),1],[[0,1,0,0],[0,1,8,1]]]), % 1â‰¡{Fâ†+â‹„f=f}
    1 = run([[15,1,0,2,0,4,17,25,0,3,0,0,7,0,3,0,0,7,3,2,22,0,0,22,0,1,4,2,11,14,21,0,1,0,1,21,0,0,17,25],[ebqn_array:get(0,R),ebqn_array:get(15,R),ebqn_array:get(18,R),ebqn_array:get(49,R),1],[[0,1,0,0],[0,1,8,2]]]), % 1â‰¡{aâ€¿bâ†âŸ¨+Â´,+Â´âŸ©â‹„a=b}
    1 = run([[15,1,0,1,0,2,17,25,15,2,22,0,0,11,14,0,3,0,0,21,0,0,17,25,21,0,1,25],[ebqn_array:get(15,R),ebqn_array:get(18,R),0,"o"],[[0,1,0,0],[0,1,8,1],[1,1,24,2]]]), % 0â‰¡{_opâ†{ğ•—}â‹„op='o'}
    1 = run([[15,1,0,1,0,2,17,25,15,2,22,0,0,11,14,15,3,22,0,1,11,14,21,0,1,0,0,21,0,0,17,25,21,0,1,25,21,0,1,25],[ebqn_array:get(15,R),ebqn_array:get(18,R),0],[[0,1,0,0],[0,1,8,2],[0,0,32,3],[0,0,36,3]]]), % 0â‰¡{Fâ†{ğ•©}â‹„Gâ†{ğ•©}â‹„f=g}
    1 = run([[15,1,0,1,0,2,17,25,15,2,22,0,0,11,14,21,0,0,0,0,21,0,0,17,25,21,0,1,25],[ebqn_array:get(15,R),ebqn_array:get(18,R),1],[[0,1,0,0],[0,1,8,1],[0,0,25,3]]]), % 1â‰¡{Fâ†{ğ•©}â‹„f=f}
    1 = run([[0,2,0,0,0,2,17,0,1,0,2,17,25],[ebqn_array:get(16,R),ebqn_array:get(18,R),1],[[0,1,0,0]]]), % 1â‰¡1â‰¤1
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(16,R),ebqn_array:get(18,R),1,ninf,-1000],[[0,1,0,0]]]), % 1â‰¡Â¯âˆâ‰¤Â¯1e3
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(16,R),ebqn_array:get(18,R),0,inf,ninf],[[0,1,0,0]]]), % 0â‰¡âˆâ‰¤Â¯âˆ
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(16,R),ebqn_array:get(18,R),1,inf,"\0"],[[0,1,0,0]]]), % 1â‰¡âˆâ‰¤@
    1 = run([[0,3,0,0,0,4,17,0,1,0,2,17,25],[ebqn_array:get(16,R),ebqn_array:get(18,R),0,-0.5,"z"],[[0,1,0,0]]]), % 0â‰¡'z'â‰¤Â¯0.5
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(16,R),ebqn_array:get(18,R),0,"c","a"],[[0,1,0,0]]]), % 0â‰¡'c'â‰¤'a'
    ok = try run([[0,0,22,0,0,11,14,0,1,22,0,1,11,14,21,0,1,0,2,21,0,0,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(16,R)],[[0,1,0,2]]]) % Fâ†+â‹„Gâ†-â‹„fâ‰¤g
        catch _ -> ok
    end,
    1 = run([[0,3,0,0,16,0,2,16,0,1,3,0,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(19,R),2],[[0,1,0,0]]]), % âŸ¨âŸ©â‰¡â‰¢<2
    1 = run([[0,3,0,1,16,0,0,0,2,3,1,17,25],[ebqn_array:get(18,R),ebqn_array:get(19,R),3,str("abc")],[[0,1,0,0]]]), % âŸ¨3âŸ©â‰¡â‰¢"abc"
    1 = run([[0,5,0,6,3,2,0,0,16,0,2,16,0,1,0,3,0,4,3,2,17,25],[ebqn_array:get(13,R),ebqn_array:get(18,R),ebqn_array:get(19,R),2,3,str("abc"),str("fed")],[[0,1,0,0]]]), % âŸ¨2,3âŸ©â‰¡â‰¢>"abc"â€¿"fed"
    1 = run([[0,8,0,3,16,0,2,0,4,0,5,0,6,0,7,3,4,17,0,1,16,0,0,0,4,0,5,0,6,0,7,3,4,17,25],[ebqn_array:get(18,R),ebqn_array:get(19,R),ebqn_array:get(22,R),ebqn_array:get(27,R),2,3,4,5,120],[[0,1,0,0]]]), % âŸ¨2,3,4,5âŸ©â‰¡â‰¢2â€¿3â€¿4â€¿5â¥Šâ†•120
    1 = run([[0,5,0,6,3,2,0,0,16,0,3,16,0,2,16,0,1,0,4,3,1,17,25],[ebqn_array:get(13,R),ebqn_array:get(18,R),ebqn_array:get(19,R),ebqn_array:get(22,R),6,str("abc"),str("fed")],[[0,1,0,0]]]), % âŸ¨6âŸ©â‰¡â‰¢â¥Š>"abc"â€¿"fed"
    1 = run([[0,3,0,4,3,2,0,1,0,2,17,0,0,0,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(36,R),0,str("abc"),str("de")],[[0,1,0,0]]]), % "abc"â‰¡0âŠ‘"abc"â€¿"de"
    1 = run([[0,4,0,3,3,2,0,1,0,2,17,0,0,0,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(36,R),1,str("de"),str("abc")],[[0,1,0,0]]]), % "de"â‰¡1âŠ‘"abc"â€¿"de"
    1 = run([[0,2,0,1,16,0,0,3,0,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),0],[[0,1,0,0]]]), % âŸ¨âŸ©â‰¡â†•0
    1 = run([[0,3,0,1,16,0,0,0,2,3,1,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),0,1],[[0,1,0,0]]]), % âŸ¨0âŸ©â‰¡â†•1
    1 = run([[0,9,0,1,16,0,0,0,2,0,3,0,4,0,5,0,6,0,7,0,8,3,7,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),0,1,2,3,4,5,6,7],[[0,1,0,0]]]), % âŸ¨0,1,2,3,4,5,6âŸ©â‰¡â†•7
    1 = run([[0,2,0,1,16,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(42,R),1],[[0,1,0,0]]]), % 1â‰¡!1
    1 = run([[0,2,0,1,0,3,17,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(42,R),1,"e"],[[0,1,0,0]]]), % 1â‰¡'e'!1
    ok = try run([[0,1,0,0,16,25],[ebqn_array:get(42,R),0],[[0,1,0,0]]]) % !0
        catch _ -> ok
    end,
    ok = try run([[0,2,0,0,0,1,17,25],[ebqn_array:get(42,R),str("error"),str("abc")],[[0,1,0,0]]]) % "error"!"abc"
        catch _ -> ok
    end,
    ok.

layer1(#v{r=R}) ->
    1 = run([[0,7,0,0,0,1,3,2,0,4,0,2,8,0,6,17,0,3,0,5,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(13,R),ebqn_array:get(18,R),ebqn_array:get(58,R),3,4,1],[[0,1,0,0]]]), % 3â‰¡4>â—¶+â€¿-1
    1 = run([[0,7,0,0,0,1,3,2,0,4,0,3,8,0,6,17,0,2,0,5,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(21,R),ebqn_array:get(58,R),3,4,1],[[0,1,0,0]]]), % 3â‰¡4âŠ¢â—¶+â€¿-1
    1 = run([[0,6,0,0,0,1,3,2,0,3,0,6,8,0,5,17,0,2,0,4,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(58,R),3,4,1],[[0,1,0,0]]]), % 3â‰¡4 1â—¶+â€¿-1
    1 = run([[0,7,0,0,0,1,3,2,0,4,0,2,8,0,6,17,0,3,0,5,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(58,R),5,4,1],[[0,1,0,0]]]), % 5â‰¡4<â—¶+â€¿-1
    1 = run([[0,7,0,0,0,1,3,2,0,3,0,6,8,0,5,17,0,2,0,4,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(58,R),5,4,0,1],[[0,1,0,0]]]), % 5â‰¡4 0â—¶+â€¿-1
    1 = run([[0,5,0,4,0,2,0,0,8,16,0,1,0,3,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(57,R),1,0,-1],[[0,1,0,0]]]), % 1â‰¡-âŠ˜0 Â¯1
    1 = run([[0,6,0,0,0,3,0,1,8,0,5,17,0,2,0,4,17,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(57,R),1,-1,2],[[0,1,0,0]]]), % 1â‰¡Â¯1-âŠ˜+2
    1 = run([[0,2,0,1,16,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(21,R),str("abc")],[[0,1,0,0]]]), % "abc"â‰¡âŠ¢"abc"
    1 = run([[0,3,0,1,0,2,17,0,0,0,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(21,R),3,str("")],[[0,1,0,0]]]), % ""â‰¡3âŠ¢""
    1 = run([[3,0,0,1,16,0,0,3,0,17,25],[ebqn_array:get(18,R),ebqn_array:get(20,R)],[[0,1,0,0]]]), % âŸ¨âŸ©â‰¡âŠ£âŸ¨âŸ©
    1 = run([[3,0,0,1,0,2,17,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(20,R),str("ab")],[[0,1,0,0]]]), % "ab"â‰¡"ab"âŠ£âŸ¨âŸ©
    1 = run([[0,4,0,2,0,0,7,16,0,1,0,3,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),ebqn_array:get(44,R),4,2],[[0,1,0,0]]]), % 4â‰¡+Ëœ2
    1 = run([[0,5,0,2,0,0,7,0,4,17,0,1,0,3,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(44,R),3,1,4],[[0,1,0,0]]]), % 3â‰¡1-Ëœ4
    1 = run([[0,5,0,1,0,3,0,0,8,16,0,2,0,4,17,25],[ebqn_array:get(1,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(52,R),1,-6],[[0,1,0,0]]]), % 1â‰¡-âˆ˜Ã—Â¯6
    1 = run([[0,6,0,1,0,3,0,0,8,0,5,17,0,2,0,4,17,25],[ebqn_array:get(1,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(52,R),-6,2,3],[[0,1,0,0]]]), % Â¯6â‰¡2-âˆ˜Ã—3
    1 = run([[0,5,0,1,0,3,0,0,8,16,0,2,0,4,17,25],[ebqn_array:get(1,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(53,R),1,-7],[[0,1,0,0]]]), % 1â‰¡-â—‹Ã—Â¯7
    1 = run([[0,6,0,1,0,3,0,0,8,0,5,17,0,2,0,4,17,25],[ebqn_array:get(1,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(53,R),2,5,-7],[[0,1,0,0]]]), % 2â‰¡5-â—‹Ã—Â¯7
    1 = run([[0,6,0,1,0,3,0,0,0,3,0,5,8,8,16,0,2,0,4,17,25],[ebqn_array:get(1,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(54,R),-20,1,5],[[0,1,0,0]]]), % Â¯20â‰¡1âŠ¸-âŠ¸Ã—5
    1 = run([[0,11,0,5,16,0,4,0,7,0,3,8,0,12,0,13,3,2,0,1,16,17,0,2,0,8,0,10,3,2,0,6,0,0,7,0,8,0,9,3,2,17,17,25],[ebqn_array:get(0,R),ebqn_array:get(13,R),ebqn_array:get(18,R),ebqn_array:get(19,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(47,R),ebqn_array:get(54,R),0,2,1,4,str("ab"),str("cd")],[[0,1,0,0]]]), % (0â€¿2+âŒœ0â€¿1)â‰¡(>âŸ¨"ab","cd"âŸ©)â‰¢âŠ¸â¥Šâ†•4
    1 = run([[0,6,0,5,0,3,0,0,8,0,3,0,1,8,16,0,2,0,4,17,25],[ebqn_array:get(1,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(55,R),20,1,5],[[0,1,0,0]]]), % 20â‰¡Ã—âŸœ(-âŸœ1)5
    1 = run([[0,6,0,1,0,3,0,0,8,0,5,17,0,2,0,4,17,25],[ebqn_array:get(0,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(55,R),4,5,-3],[[0,1,0,0]]]), % 4â‰¡5+âŸœÃ—Â¯3
    1 = run([[0,6,0,5,0,2,0,0,8,0,4,17,0,1,0,3,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),ebqn_array:get(55,R),7,5,2,-3],[[0,1,0,0]]]), % 7â‰¡5+âŸœ2 Â¯3
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(5,R),ebqn_array:get(18,R),2,4],[[0,1,0,0]]]), % 2â‰¡âˆš4
    1 = run([[0,3,0,0,0,2,17,0,1,0,2,17,25],[ebqn_array:get(5,R),ebqn_array:get(18,R),3,27],[[0,1,0,0]]]), % 3â‰¡3âˆš27
    ok = try run([[0,1,0,0,16,25],[ebqn_array:get(5,R),"x"],[[0,1,0,0]]]) %  âˆš'x'
        catch _ -> ok
    end,
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(10,R),ebqn_array:get(18,R),6,2,3],[[0,1,0,0]]]), % 6â‰¡2âˆ§3
    1 = run([[0,2,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(10,R),ebqn_array:get(18,R),0,-2],[[0,1,0,0]]]), % 0â‰¡Â¯2âˆ§0
    ok = try run([[0,1,0,0,0,2,17,25],[ebqn_array:get(10,R),-1,"a"],[[0,1,0,0]]]) %  'a'âˆ§Â¯1
        catch _ -> ok
    end,
    1 = run([[0,4,0,2,0,0,7,16,0,1,0,3,17,25],[ebqn_array:get(11,R),ebqn_array:get(18,R),ebqn_array:get(44,R),0.75,0.5],[[0,1,0,0]]]), % 0.75â‰¡âˆ¨Ëœ0.5
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(11,R),ebqn_array:get(18,R),1.75,2,0.25],[[0,1,0,0]]]), % 1.75â‰¡2âˆ¨0.25
    ok = try run([[0,0,22,0,0,11,14,21,0,0,0,1,0,2,17,25],[ebqn_array:get(1,R),ebqn_array:get(11,R),2],[[0,1,0,1]]]) %  Fâ†-â‹„2âˆ¨f
        catch _ -> ok
    end,
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),0,1],[[0,1,0,0]]]), % 0â‰¡Â¬1
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),1,0],[[0,1,0,0]]]), % 1â‰¡Â¬0
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),2,-1],[[0,1,0,0]]]), % 2â‰¡Â¬Â¯1
    ok = try run([[0,1,0,0,16,25],[ebqn_array:get(9,R),"a"],[[0,1,0,0]]]) %  Â¬'a'
        catch _ -> ok
    end,
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),0,3,4],[[0,1,0,0]]]), % 0â‰¡3Â¬4
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),2,4,3],[[0,1,0,0]]]), % 2â‰¡4Â¬3
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),4,5,2],[[0,1,0,0]]]), % 4â‰¡5Â¬2
    ok = try run([[15,1,22,0,0,11,14,21,0,0,0,0,0,1,17,25,21,0,1,25],[ebqn_array:get(9,R),0],[[0,1,0,1],[0,0,16,3]]]) % Fâ†{ğ•©}â‹„0Â¬f
        catch _ -> ok
    end,
    1 = run([[0,2,0,0,16,0,1,0,2,17,25],[ebqn_array:get(8,R),ebqn_array:get(18,R),0],[[0,1,0,0]]]), % 0â‰¡|0
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(8,R),ebqn_array:get(18,R),5,-5],[[0,1,0,0]]]), % 5â‰¡|Â¯5
    1 = run([[0,2,0,0,16,0,1,0,2,17,25],[ebqn_array:get(8,R),ebqn_array:get(18,R),6],[[0,1,0,0]]]), % 6â‰¡|6
    %1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(8,R),ebqn_array:get(18,R),inf,ninf],[[0,1,0,0]]]), % âˆâ‰¡|Â¯âˆ
    %ok = try run([[0,1,0,0,9,22,0,0,11,14,21,0,0,0,2,16,25],[ebqn_array:get(0,R),ebqn_array:get(1,R),ebqn_array:get(8,R)],[[0,1,0,1]]]) % Fâ†+-â‹„|f
    %    catch _ -> ok
    %end,
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(8,R),ebqn_array:get(18,R),2,3,8],[[0,1,0,0]]]), % 2â‰¡3|8
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(8,R),ebqn_array:get(18,R),2,3,-7],[[0,1,0,0]]]), % 2â‰¡3|Â¯7
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(8,R),ebqn_array:get(18,R),-1,-3,8],[[0,1,0,0]]]), % Â¯1â‰¡Â¯3|8
    1 = run([[0,3,0,4,0,5,3,2,3,2,0,0,16,0,2,16,0,1,3,0,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(19,R),2,3,4],[[0,1,0,0]]]), % âŸ¨âŸ©â‰¡â‰¢<âŸ¨2,âŸ¨3,4âŸ©âŸ©
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),0,4,2],[[0,1,0,0]]]), % 0â‰¡4<2
    1 = run([[0,3,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(13,R),ebqn_array:get(18,R),0,5],[[0,1,0,0]]]), % 0â‰¡5>5
    1 = run([[0,4,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(17,R),ebqn_array:get(18,R),0,3,4],[[0,1,0,0]]]), % 0â‰¡3â‰¥4
    1 = run([[0,3,0,2,16,0,0,16,0,1,0,3,17,25],[ebqn_array:get(14,R),ebqn_array:get(18,R),ebqn_array:get(27,R),25],[[0,1,0,0]]]), % 25â‰¡â‰ â†•25
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(2,R),ebqn_array:get(18,R),1,5],[[0,1,0,0]]]), % 1â‰¡Ã—5
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(2,R),ebqn_array:get(18,R),-1,-2.5],[[0,1,0,0]]]), % Â¯1â‰¡Ã—Â¯2.5
    1 = run([[0,3,0,0,0,2,17,0,1,0,2,17,25],[ebqn_array:get(6,R),ebqn_array:get(18,R),3,4],[[0,1,0,0]]]), % 3â‰¡3âŒŠ4
    1 = run([[0,3,0,0,0,2,17,0,1,0,2,17,25],[ebqn_array:get(6,R),ebqn_array:get(18,R),-3,inf],[[0,1,0,0]]]), % Â¯3â‰¡Â¯3âŒŠâˆ
    1 = run([[0,2,0,0,0,3,17,0,1,0,2,17,25],[ebqn_array:get(7,R),ebqn_array:get(18,R),4,3],[[0,1,0,0]]]), % 4â‰¡3âŒˆ4
    1 = run([[0,3,0,0,0,2,17,0,1,0,2,17,25],[ebqn_array:get(7,R),ebqn_array:get(18,R),1,-1],[[0,1,0,0]]]), % 1â‰¡1âŒˆÂ¯1
    1 = run([[0,3,0,0,16,0,1,0,2,17,25],[ebqn_array:get(7,R),ebqn_array:get(18,R),5,4.01],[[0,1,0,0]]]), % 5â‰¡âŒˆ4.01
    1 = run([[0,2,0,1,16,0,0,3,0,17,25],[ebqn_array:get(18,R),ebqn_array:get(19,R),0],[[0,1,0,0]]]), % âŸ¨âŸ©â‰¡â‰¢0
    1 = run([[0,7,0,2,16,0,3,0,1,7,16,0,0,0,4,3,1,0,5,3,1,0,6,3,1,3,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(46,R),0,1,2,3],[[0,1,0,0]]]), % âŸ¨0âŸ©â€¿âŸ¨1âŸ©â€¿âŸ¨2âŸ©â‰¡â¥ŠÂ¨â†•3
    1 = run([[0,7,0,3,16,0,2,0,6,0,7,0,8,3,3,17,0,4,0,0,7,0,5,0,1,8,16,25],[ebqn_array:get(14,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(46,R),ebqn_array:get(55,R),4,0,2],[[0,1,0,0]]]), % â‰¡âŸœ(â‰ Â¨)4â€¿0â€¿2â¥Šâ†•0
    1 = run([[0,5,0,2,16,0,3,0,0,7,16,0,1,0,4,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(49,R),6,4],[[0,1,0,0]]]), % 6â‰¡+Â´â†•4
    1 = run([[0,6,0,7,3,2,0,8,0,4,3,2,3,2,0,3,0,2,0,0,7,7,16,0,1,0,4,0,5,3,2,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),ebqn_array:get(46,R),ebqn_array:get(49,R),7,10,2,3,5],[[0,1,0,0]]]), % 7â€¿10â‰¡+Â¨Â´âŸ¨âŸ¨2,3âŸ©,âŸ¨5,7âŸ©âŸ©
    ok.

layer2(#v{r=R}) ->
    1 = run([[0,11,0,10,3,2,0,6,0,4,0,7,0,5,0,0,7,0,8,0,10,0,9,0,1,8,8,8,7,0,2,0,6,0,1,7,0,4,9,0,9,0,3,8,19,16,25],[ebqn_array:get(0,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(47,R),ebqn_array:get(49,R),ebqn_array:get(53,R),ebqn_array:get(54,R),ebqn_array:get(55,R),4,3],[[0,1,0,0]]]), % (â¥ŠâŸœ(â†•Ã—Â´)â‰¡(Ã—âŸœ4)âŠ¸(+âŒœ)â—‹â†•Â´)3â€¿4
    1 = run([[0,11,0,10,3,2,0,6,0,4,0,7,0,5,0,0,7,0,8,0,10,0,9,0,1,8,8,8,7,0,2,0,6,0,1,7,0,4,9,0,9,0,3,8,19,16,25],[ebqn_array:get(0,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(47,R),ebqn_array:get(49,R),ebqn_array:get(53,R),ebqn_array:get(54,R),ebqn_array:get(55,R),4,0],[[0,1,0,0]]]), % (â¥ŠâŸœ(â†•Ã—Â´)â‰¡(Ã—âŸœ4)âŠ¸(+âŒœ)â—‹â†•Â´)0â€¿4
    1 = run([[0,4,0,3,0,0,7,16,0,2,0,4,0,0,16,0,1,16,17,25],[ebqn_array:get(1,R),ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(46,R),2],[[0,1,0,0]]]), % (<-2)â‰¡-Â¨2
    1 = run([[0,3,0,2,0,0,7,16,0,1,0,3,0,0,16,0,0,16,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(46,R),2],[[0,1,0,0]]]), % (<<2)â‰¡<Â¨2
    1 = run([[0,4,0,0,16,0,5,0,0,16,0,6,0,0,16,0,4,0,7,0,6,0,7,3,4,0,2,0,6,0,6,3,2,17,0,3,0,0,7,16,3,3,0,8,0,0,16,0,9,0,0,16,3,2,3,3,0,0,16,0,1,0,4,0,5,0,6,0,4,0,7,0,6,0,7,3,4,0,2,0,6,0,6,3,2,17,3,3,0,8,0,9,3,2,3,3,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(46,R),1,3,2,0,5,4],[[0,1,0,0]]]), % âŸ¨1,âŸ¨3,2,2â€¿2â¥ŠâŸ¨1,0,2,0âŸ©âŸ©,âŸ¨5,4âŸ©âŸ©â‰¡-âŸ¨-1,âŸ¨-3,-2,-Â¨2â€¿2â¥ŠâŸ¨1,0,2,0âŸ©âŸ©,âŸ¨-5,-4âŸ©âŸ©
    1 = run([[0,6,0,2,16,0,4,0,0,7,0,1,0,3,0,0,7,19,0,5,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(46,R),ebqn_array:get(47,R),3,6],[[0,1,0,0]]]), % 3(+Â¨â‰¡+âŒœ)â†•6
    1 = run([[0,14,0,13,3,2,0,9,3,2,0,10,3,2,0,11,3,2,0,0,0,13,0,14,3,2,17,15,1,16,0,2,0,9,0,10,0,11,0,12,0,12,3,5,17,25,21,0,1,0,5,0,3,0,7,0,4,0,6,0,2,0,1,9,0,8,21,0,0,8,8,8,7,16,25],[ebqn_array:get(0,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(23,R),ebqn_array:get(49,R),ebqn_array:get(54,R),ebqn_array:get(55,R),ebqn_array:get(61,R),3,4,5,6,2,1],[[0,1,0,0],[0,0,46,3]]]), % 3â€¿4â€¿5â€¿6â€¿6â‰¡{ğ•ŠâŸ(Ã—â‰¡)âŠ¸âˆ¾âŸœâ¥ŠÂ´ğ•©}âŸ¨2,1âŸ©+âŸ¨âŸ¨âŸ¨âŸ¨1,2âŸ©,3âŸ©,4âŸ©,5âŸ©
    1 = run([[0,8,0,5,16,0,6,0,4,7,0,0,0,3,19,0,7,0,5,16,17,0,2,16,0,1,0,7,0,8,3,2,17,25],[ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(19,R),ebqn_array:get(20,R),ebqn_array:get(21,R),ebqn_array:get(27,R),ebqn_array:get(47,R),3,2],[[0,1,0,0]]]), % 3â€¿2â‰¡â‰¢(â†•3)(âŠ£Ã—âŠ¢âŒœ)â†•2
    1 = run([[0,14,0,15,0,16,3,3,0,4,0,1,0,13,19,0,7,0,9,0,2,7,7,0,13,0,6,16,19,0,3,0,12,0,13,3,2,0,10,0,0,7,0,6,9,0,11,0,5,8,16,0,11,0,8,0,2,7,8,19,16,25],[ebqn_array:get(2,R),ebqn_array:get(8,R),ebqn_array:get(15,R),ebqn_array:get(18,R),ebqn_array:get(21,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(44,R),ebqn_array:get(46,R),ebqn_array:get(47,R),ebqn_array:get(49,R),ebqn_array:get(55,R),3,4,1,6,8],[[0,1,0,0]]]), % (=Â¨âŸœ(â¥ŠâŸœ(â†•Ã—Â´)3â€¿4)â‰¡(â†•4)=âŒœËœ4|âŠ¢)1â€¿6â€¿8
    ok.

layer3(#v{r=R}) ->
    1 = run([[0,2,0,1,16,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(36,R),2],[[0,1,0,0]]]), % 2â‰¡âŠ‘2
    1 = run([[0,2,3,1,0,1,16,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(36,R),2],[[0,1,0,0]]]), % 2â‰¡âŠ‘âŸ¨2âŸ©
    1 = run([[0,4,0,1,16,0,2,16,0,0,0,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(36,R),0,20],[[0,1,0,0]]]), % 0â‰¡âŠ‘â†•20
    1 = run([[0,10,0,1,0,9,17,0,2,0,4,0,1,8,0,5,17,0,1,0,6,0,7,0,8,3,3,17,0,3,16,0,0,0,5,17,25],[ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(23,R),ebqn_array:get(36,R),ebqn_array:get(54,R),4,3,2,1,5,0],[[0,1,0,0]]]), % 4â‰¡âŠ‘3â€¿2â€¿1â¥Š4â¥ŠâŠ¸âˆ¾5â¥Š0
    1 = run([[0,4,0,1,16,0,2,0,3,17,0,0,0,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(36,R),7,10],[[0,1,0,0]]]), % 7â‰¡7âŠ‘â†•10
    1 = run([[0,4,0,1,16,0,2,0,3,3,1,17,0,0,0,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(36,R),7,10],[[0,1,0,0]]]), % 7â‰¡âŸ¨7âŸ©âŠ‘â†•10
    1 = run([[0,5,0,1,16,0,2,0,4,17,0,0,0,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(36,R),0,-10,10],[[0,1,0,0]]]), % 0â‰¡Â¯10âŠ‘â†•10
    1 = run([[0,11,0,3,16,0,5,0,0,7,0,10,0,3,16,0,1,0,9,17,17,0,4,0,7,0,8,3,2,17,0,2,0,6,17,25],[ebqn_array:get(0,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(36,R),ebqn_array:get(47,R),21,2,-3,10,3,4],[[0,1,0,0]]]), % 21â‰¡2â€¿Â¯3âŠ‘(10Ã—â†•3)+âŒœâ†•4
    1 = run([[0,15,0,3,16,0,5,0,0,7,0,8,0,3,16,0,1,0,14,17,17,0,4,0,9,0,10,3,2,0,11,0,9,3,2,0,12,0,13,3,2,3,3,17,0,2,0,6,0,7,0,8,3,3,17,25],[ebqn_array:get(0,R),ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(36,R),ebqn_array:get(47,R),21,12,3,2,-3,1,0,-1,10,4],[[0,1,0,0]]]), % 21â€¿12â€¿03â‰¡âŸ¨2â€¿Â¯3,1â€¿2,0â€¿Â¯1âŸ©âŠ‘(10Ã—â†•3)+âŒœâ†•4
    1 = run([[0,3,0,0,16,0,2,3,0,3,0,3,0,3,2,3,0,3,3,17,0,1,0,3,0,3,0,3,3,2,0,3,3,3,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(36,R),7],[[0,1,0,0]]]), % âŸ¨7,7â€¿7,7âŸ©â‰¡âŸ¨âŸ¨âŸ©,âŸ¨âŸ¨âŸ©,âŸ¨âŸ©âŸ©,âŸ¨âŸ©âŸ©âŠ‘<7
    1 = run([[0,3,0,2,3,0,3,0,3,0,0,0,16,3,2,3,2,17,0,1,0,3,0,3,0,3,0,0,16,3,2,3,2,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(36,R),7],[[0,1,0,0]]]), % âŸ¨7,âŸ¨7,<7âŸ©âŸ©â‰¡âŸ¨âŸ¨âŸ©,âŸ¨âŸ¨âŸ©,<âŸ¨âŸ©âŸ©âŸ©âŠ‘7
    1 = run([[0,9,0,3,0,8,0,3,0,6,17,17,0,2,0,5,0,4,0,5,0,0,8,8,0,1,0,4,19,0,7,0,3,0,6,17,0,0,16,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(21,R),ebqn_array:get(22,R),ebqn_array:get(36,R),ebqn_array:get(52,R),6,0,1,5],[[0,1,0,0]]]), % (<6â¥Š0)(âŠ‘â‰¡<âˆ˜âŠ‘âˆ˜âŠ¢)(6â¥Š1)â¥Š5
    1 = run([[0,8,0,6,0,6,0,0,0,6,3,4,0,2,0,7,0,7,3,2,17,0,3,0,5,0,6,3,2,8,16,0,1,0,4,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(58,R),-6,1,0,2,6],[[0,1,0,0]]]), % Â¯6â‰¡1â€¿0â—¶(2â€¿2â¥Š0â€¿0â€¿-â€¿0)6
    1 = run([[0,2,0,1,16,0,0,0,2,3,1,17,25],[ebqn_array:get(18,R),ebqn_array:get(22,R),3],[[0,1,0,0]]]), % âŸ¨3âŸ©â‰¡â¥Š3
    1 = run([[0,4,0,0,0,1,0,2,0,3,3,0,8,19,16,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(54,R),3],[[0,1,0,0]]]), % (âŸ¨âŸ©âŠ¸â¥Šâ‰¡<)3
    1 = run([[0,2,0,1,0,2,17,0,0,0,2,0,2,0,2,3,3,17,25],[ebqn_array:get(18,R),ebqn_array:get(22,R),3],[[0,1,0,0]]]), % âŸ¨3,3,3âŸ©â‰¡3â¥Š3
    1 = run([[0,4,0,2,0,3,0,0,8,0,4,17,0,1,0,4,0,4,0,4,3,3,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(54,R),3],[[0,1,0,0]]]), % âŸ¨3,3,3âŸ©â‰¡3<âŠ¸â¥Š3
    1 = run([[0,9,0,5,0,7,0,2,0,3,0,1,0,7,0,4,8,19,0,0,0,6,0,2,7,19,8,0,8,17,25],[ebqn_array:get(18,R),ebqn_array:get(19,R),ebqn_array:get(21,R),ebqn_array:get(22,R),ebqn_array:get(23,R),ebqn_array:get(27,R),ebqn_array:get(47,R),ebqn_array:get(53,R),6,3],[[0,1,0,0]]]), % 6(âŠ¢âŒœâ‰¡âˆ¾â—‹â‰¢â¥ŠâŠ¢)â—‹â†•3
    1 = run([[3,0,0,2,0,1,0,0,19,16,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(27,R)],[[0,1,0,0]]]), % (<â‰¡â†•)âŸ¨âŸ©
    1 = run([[0,5,0,2,0,4,0,3,0,1,7,8,0,0,0,1,0,4,0,2,8,19,16,25],[ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(46,R),ebqn_array:get(52,R),9],[[0,1,0,0]]]), % (â†•âˆ˜â¥Šâ‰¡â¥ŠÂ¨âˆ˜â†•)9
    1 = run([[0,8,0,8,0,3,16,0,9,0,8,3,2,0,3,16,3,3,0,4,0,2,0,1,0,2,0,7,0,6,3,1,8,19,7,16,0,5,0,0,7,16,25],[ebqn_array:get(10,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(46,R),ebqn_array:get(49,R),ebqn_array:get(52,R),ebqn_array:get(54,R),4,2],[[0,1,0,0]]]), % âˆ§Â´(âŸ¨âˆ˜âŸ©âŠ¸â¥Šâ‰¡â¥Š)Â¨ âŸ¨4,â†•4,â†•2â€¿4âŸ©
    1 = run([[0,12,0,5,16,0,0,0,7,17,0,3,0,9,0,1,3,2,17,0,3,0,4,0,12,3,2,17,0,3,0,11,0,6,3,2,17,0,3,16,0,2,0,7,0,8,0,9,0,10,0,7,3,5,17,25],[ebqn_array:get(0,R),ebqn_array:get(6,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(25,R),ebqn_array:get(27,R),ebqn_array:get(30,R),1,2,3,0,5,4],[[0,1,0,0]]]), % 1â€¿2â€¿3â€¿0â€¿1â‰¡â¥Š5â€¿âŒ½â¥Šâ†‘â€¿4â¥Š3â€¿âŒŠâ¥Š1+â†•4
    1 = run([[0,10,0,3,16,0,0,16,0,5,0,2,7,0,7,0,4,0,8,3,3,0,7,0,9,0,8,3,3,3,2,17,0,6,0,1,7,16,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(27,R),ebqn_array:get(30,R),ebqn_array:get(46,R),ebqn_array:get(49,R),2,4,3,19],[[0,1,0,0]]]), % â‰¡Â´âŸ¨2â€¿âŒ½â€¿4,2â€¿3â€¿4âŸ©â¥ŠÂ¨<â†•19
    1 = run([[0,5,0,6,0,9,0,7,3,2,0,8,3,4,0,2,0,4,0,6,0,6,3,2,8,0,3,0,1,8,0,5,0,6,0,7,0,7,3,2,0,8,3,4,17,0,0,16,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(53,R),ebqn_array:get(54,R),1,2,4,5,3],[[0,1,0,0]]]), % Â¬âŸ¨1,2,âŸ¨4,4âŸ©,5âŸ©â‰¡â—‹(2â€¿2âŠ¸â¥Š)âŸ¨1,2,âŸ¨3,4âŸ©,5âŸ©
    1 = run([[0,2,0,3,3,2,0,1,0,2,0,3,0,4,3,3,17,0,0,16,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),2,3,4],[[0,1,0,0]]]), % Â¬2â€¿3â€¿4â‰¡2â€¿3
    1 = run([[0,3,0,1,0,2,17,0,0,16,25],[ebqn_array:get(9,R),ebqn_array:get(18,R),1.001,1.002],[[0,1,0,0]]]), % Â¬1.001â‰¡1.002
    1 = run([[0,3,0,1,16,0,0,16,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),1,6],[[0,1,0,0]]]), % 1â‰¡â‰¡â†•6
    1 = run([[0,2,0,3,3,2,0,1,16,0,0,16,0,0,0,2,17,25],[ebqn_array:get(18,R),ebqn_array:get(27,R),2,4],[[0,1,0,0]]]), % 2â‰¡â‰¡â†•2â€¿4
    1 = run([[0,3,0,0,16,0,0,16,0,0,16,0,1,16,0,1,0,2,17,25],[ebqn_array:get(12,R),ebqn_array:get(18,R),3,4],[[0,1,0,0]]]), % 3â‰¡â‰¡<<<4
    1 = run([[0,8,3,0,0,7,3,1,0,9,0,10,0,11,3,2,3,5,0,4,0,2,0,6,0,3,0,1,0,5,0,0,8,7,8,7,0,1,0,4,0,7,7,19,16,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(44,R),ebqn_array:get(46,R),ebqn_array:get(53,R),ebqn_array:get(55,R),1,0,2,3,4],[[0,1,0,0]]]), % (1Â¨â‰¡-â—‹â‰¡ËœâŸœâ†•Â¨)âŸ¨0,âŸ¨âŸ©,âŸ¨1âŸ©,2,âŸ¨3,4âŸ©âŸ©
    1 = run([[0,0,3,1,0,2,16,0,1,16,0,1,0,3,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(36,R),0],[[0,1,0,0]]]), % 0â‰¡â‰¡âŠ‘âŸ¨-âŸ©
    ok.

% layer 4
layer4(#v{r=R}) ->
    1 = run([[0,9,0,2,16,0,3,0,0,7,16,0,1,0,4,0,5,0,6,0,7,0,8,3,5,17,25],[ebqn_array:get(0,R),ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(51,R),0,1,3,6,10,5],[[0,1,0,0]]]), % 0â€¿1â€¿3â€¿6â€¿10â‰¡+`â†•5
    1 = run([[0,9,0,2,16,0,3,0,0,7,16,0,1,0,4,0,5,0,6,0,7,0,8,3,5,0,0,16,17,25],[ebqn_array:get(1,R),ebqn_array:get(18,R),ebqn_array:get(27,R),ebqn_array:get(51,R),0,1,3,6,10,5],[[0,1,0,0]]]), % (-0â€¿1â€¿3â€¿6â€¿10)â‰¡-`â†•5
    1 = run([[0,9,0,8,3,2,0,4,16,0,6,0,0,7,16,0,0,0,7,0,1,0,8,17,0,3,0,8,0,4,16,0,5,0,2,7,0,7,17,17,17,25],[ebqn_array:get(18,R),ebqn_array:get(22,R),ebqn_array:get(23,R),ebqn_array:get(24,R),ebqn_array:get(27,R),ebqn_array:get(46,R),ebqn_array:get(51,R),0,3,2],[[0,1,0,0]]]), % ((0âˆ¾Â¨â†•3)â‰3â¥Š0)â‰¡â‰¡`â†•2â€¿3
    1 = run([[3,0,0,2,0,0,7,16,0,1,3,0,17,25],[ebqn_array:get(2,R),ebqn_array:get(18,R),ebqn_array:get(51,R)],[[0,1,0,0]]]), % âŸ¨âŸ©â‰¡Ã—`âŸ¨âŸ©
    ok.

test5(#v{r=R}) ->
    run([[0,6,0,0,0,5,0,3,3,2,17,0,2,0,1,7,0,4,17,25],[ebqn_array:get(22,R),ebqn_array:get(35,R),ebqn_array:get(45,R),ebqn_array:get(52,R),-1,10,str("ğ•Šğ•ğ•ğ”½ğ”¾ğ•¤ğ•©ğ•¨ğ•—ğ•˜")],[[0,1,0,0]]]), % 'Â¯1âŠË˜10â€¿âˆ˜â¥Š"ğ•Šğ•ğ•ğ”½ğ”¾ğ•¤ğ•©ğ•¨ğ•—ğ•˜"'
    run([[0,2,0,1,16,0,0,0,3,17,25],[ebqn_array:get(0,R),ebqn_array:get(27,R),10,'0'],[[0,1,0,0]]]), % "'0'+â†•10"
    run([[0,0,25],[str("Ï€âˆÂ¯.")],[[0,1,0,0]]]), % '"Ï€âˆÂ¯."'
    run([[0,6,22,0,0,11,0,3,16,0,5,0,0,7,0,8,17,0,1,16,0,4,0,2,7,0,7,17,25],[ebqn_array:get(0,R),ebqn_array:get(22,R),ebqn_array:get(23,R),ebqn_array:get(27,R),ebqn_array:get(44,R),ebqn_array:get(47,R),26,str("_"),str("aA")],[[0,1,0,1]]]), % '"_"âˆ¾Ëœâ¥Š"aA"+âŒœâ†•naâ†26'
    run([[0,4,0,0,0,5,17,0,1,0,7,17,0,1,0,6,0,2,0,3,17,17,25],[ebqn_array:get(0,R),ebqn_array:get(23,R),ebqn_array:get(26,R),-1,9,'\0',str("ğ•¨"),str(" ")],[[0,1,0,0]]]), % '(Â¯1â†“"ğ•¨")âˆ¾" "âˆ¾@+9'
    run([[0,0,25],[str("#\'\"@")],[[0,1,0,0]]]), % "\"#'\"\"@\""
    ok.
